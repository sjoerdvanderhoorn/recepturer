<!DOCTYPE html>
<html>

<head>
    <title>Recepturer</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <!-- Dependencies -->
    <script src="resources/vuejs/vue.js"></script>
    <link href="resources/googlefonts/materialicons.css" rel="stylesheet">
    <link rel="stylesheet" href="resources/materialize/css/materialize.min.css">
    <!-- Recepturer -->
    <link rel="stylesheet" href="css/style.css" />
    <script type="application/javascript" src="js/recepturer.js"></script>
    <script type="application/javascript" src="components/recipes.js"></script>
    <script type="application/javascript" src="components/recipe.js"></script>
    <script type="application/javascript" src="components/shopping.js"></script>
    <script type="application/javascript" src="components/debug.js"></script>
</head>

<body>
    <div id="recepturer">

        <!-- App -->
        <header v-cloak>
            <a data-target="nav-mobile" class="top-nav sidenav-trigger btn-floating btn-large teal lighten-3 waves-effect waves-light hide-on-large-only" style="margin: 15px;">
                <i class="material-icons">menu</i>
            </a>
            <ul id="nav-mobile" class="sidenav sidenav-fixed">
                <li>
                    <a class="subheader">View</a>
                </li>
                <li class="bold sidenav-close" :class="{active: page=='recipes' || page=='recipe'}">
                    <a :href="'#/recipes/'" class="waves-effect waves-teal"><i class="material-icons">blender</i>Recipes</a>
                </li>
                <li class="bold sidenav-close" :class="{active: page=='menu'}">
                    <a :href="'#/menu/'" class="waves-effect waves-teal"><i class="material-icons">menu</i>Menu</a>
                </li>

                <li>
                    <a class="subheader">Shopping</a>
                </li>
                <li class="bold sidenav-close" :class="{active: page=='shopping'}">
                    <a :href="'#/shopping/'" class="waves-effect waves-teal"><i class="material-icons">shopping_cart</i>Shopping</a>
                </li>
                <li v-if="isDebug()">
                    <div class="divider"></div>
                </li>
                <li v-if="isDebug()">
                    <a class="subheader">Development</a>
                </li>
                <li class="bold sidenav-close" :class="{active: page=='debug'}" v-if="isDebug()">
                    <a :href="'#/debug'" class="waves-effect waves-teal"><i class="material-icons">adb</i>Debug</a>
                </li>
            </ul>
        </header>

        <main v-if="page=='recipes'">
            <recipes :recipes="recipes" />
        </main>

        <main v-if="page=='recipe'">
            <recipe :recipe="recipe" />
        </main>

        <main v-if="page=='shopping'">
            <shopping />
        </main>

        <main v-if="page=='debug'">
            <debug :recipes="recipes" />
        </main>

    </div>


    <script type="application/javascript">
        var rcp = new Recepturer();

        // DOM bindings
        var recepturer = new Vue({
            el: "#recepturer",
            data: {
                page: "recipe",
                recipe: {
                    id: "",
                    title: "",
                    description: "",
                    directions: ""
                },
                recipes: [{
                    id: "appeltaart",
                    title: "Appeltaart",
                    description: "Lekker lekker",
                    directions: "* Schil 500 gram appels zonder schil\n* Doe er 50 gram deeg bij\n* Zet het geheel 30 minuten in de oven op 200 graden\n* Doe er nog 12 gram appels bij"
                }, {
                    id: "appeltaart-2",
                    title: "Appeltaart 2",
                    description: "Lekker lekker",
                    directions: "* Schil 500 gram appels zonder schil\n* Doe er 50 gram deeg bij\n* Zet het geheel 30 minuten in de oven op 200 graden\n* Doe er nog 12 gram appels bij"
                }, {
                    id: "appeltaart-17",
                    title: "Appeltaart 17",
                    description: "Lekker lekker",
                    directions: "* Schil 500 gram appels zonder schil\n* Doe er 50 gram deeg bij\n* Zet het geheel 30 minuten in de oven op 200 graden\n* Doe er nog 12 gram appels bij"
                }, {
                    id: "appeltaart-18",
                    title: "Appeltaart 18",
                    description: "Lekker lekker",
                    directions: "* Schil 500 gram appels zonder schil\n* Doe er 50 gram deeg bij\n* Zet het geheel 30 minuten in de oven op 200 graden\n* Doe er nog 12 gram appels bij"
                }, {
                    id: "appeltaart-19",
                    title: "Appeltaart 19",
                    description: "Lekker lekker",
                    directions: "* Schil 500 gram appels zonder schil\n* Doe er 50 gram deeg bij\n* Zet het geheel 30 minuten in de oven op 200 graden\n* Doe er nog 12 gram appels bij"
                }, {
                    id: "bananentaart",
                    title: "bananentaart",
                    description: "Iets met appels en weet ik veel wat.",
                    directions: "* Schil 500 gram appels zonder schil\n* Doe er 50 gram deeg bij\n* Zet het geheel 30 minuten in de oven op 200 graden\n* Doe er nog 12 gram appels bij"
                }, {
                    id: "appeltaart-21",
                    title: "Appeltaart 21",
                    description: "Lekker lekker",
                    directions: "* Schil 500 gram appels zonder schil\n* Doe er 50 gram deeg bij\n* Zet het geheel 30 minuten in de oven op 200 graden\n* Doe er nog 12 gram appels bij"
                }]
            },
            mounted: function() {},
            watch: {},
            methods: {
                isDebug: function() {
                    return true;
                }
            }
        });

        function router() {
            var url = document.location.hash.split("/");
            switch (url[1]) {
                case "recipes":
                    recepturer.page = url[1];
                    document.title = `Recepturer - Shopping`;
                    break;
                case "recipe":
                    recepturer.page = url[1];
                    recepturer.recipe = recepturer.recipes.find(recipe => recipe.id == url[2]);
                    if (recepturer.recipe) {
                        document.title = `Recepturer - ${recepturer.recipe.title}`;
                    } else {
                        document.title = `Recepturer - Recipes`;
                    }
                    break;
                case "shopping":
                    recepturer.page = url[1];
                    document.title = `Recepturer - Shopping`;
                    break;
                case "debug":
                    recepturer.page = "debug";
                    break;
                default:
                    // Unknown link, do nothing
                    recepturer.page = "start";
                    document.title = `Recepturer`;
                    break;
            }
        }
        window.addEventListener("hashchange", router);
        router();
    </script>

    <!-- Dependencies -->
    <script type="application/javascript" src="resources/materialize/js/materialize.min.js"></script>
    <script type="application/javascript">
        M.AutoInit();
    </script>

</body>

</html>